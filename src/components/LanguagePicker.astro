---
import { languages } from '../i18n/ui';
---

<select
  id="lang-select"
  class="absolute top-0 right-5 rounded-full border border-text-muted bg-white px-4 py-2 text-xl cursor-pointer focus:outline-none appearance-none lg:right-1/8 dark:border-gray-600 dark:bg-dark-primary dark:text-white"
  onchange="window.location.href = this.value"
>
  {Object.entries(languages).map(([lang, label]) => (
    <option value={`/${lang}/`}>{label}</option>
  ))}
</select>

<script>
  const select = document.getElementById('lang-select') as HTMLSelectElement;
  const currentLang = window.location.pathname.split('/')[1];

  if (select) {
    Array.from(select.options).forEach((option) => {
      if (option.value === `/${currentLang}/`) {
        option.selected = true;
      }
    });
  }
</script>